<script>
    var ClaimAPIBehavior = {
        properties: {
            _endpoint: {
                value: 'http://blockchain-insurance.eu-gb.mybluemix.net/',
            },
        },
        _claim: function (){
            let _endpoint = this._endpoint;
            return {
                createClaim: function (token,relatedPolicy, description, date, type) {
                    let headers = new Headers();
                    headers.append("authorization", "bearer " + token);
                    headers.append("Content-Type", "application/json");
                    return fetch(_endpoint + 'claimant/DanCotton/claim',{
                        method: 'POST',
                        headers: headers,
                        body: JSON.stringify({
                            relatedPolicy: relatedPolicy,
                            description: description,
                            incidentDate: date,
                            type: type

                        })
                    }).then(response => {
                        console.log(response);
                        return response.headers.get('Token');
                    });
                }
            }
        }
    }
</script>